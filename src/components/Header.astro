---
import type { NavLink } from '@types'

const links: NavLink[] = [
  { name: 'Home', url: '/' },
  { name: 'Archive', url: '/posts' },
]
---

<header>
  <div class="flex justify-between bg-accent/10 rounded-xl">
    <a
      id="logo"
      href="/"
      class="px-4 py-1.5 max-w-full no-underline items-center bg-accent text-background font-bold rounded-xl"
    >
      Terminal
    </a>
    <nav id="nav-mobile" aria-label="Menu" class="relative p-0 text-accent sm:hidden">
      <button
        id="nav-mobile-button"
        class="px-4 h-full cursor-pointer border-2 rounded-xl bg-background"
        type="button"
        aria-expanded="true"
        aria-controls="nav-menu-list"
      >
        Menu ▾
      </button>
      <ul
        id="nav-mobile-list"
        class="invisible absolute flex flex-col bg-background shadow text-accent border-2 m-0 p-2.5 top-11.5 left-auto right-0 z-50 rounded-xl"
      >
        {
          links.map((link) => (
            <li class="p-1" aria-expanded="false">
              <a class="underline" href={link.url}>
                {link.name}
              </a>
            </li>
          ))
        }
      </ul>
    </nav>
  </div>
  <nav aria-label="Menu" class="p-0 mt-4 ml-0.5 text-accent hidden sm:block">
    <ul class="flex flex-row bg-background text-accent mb-2.5">
      {
        links.map((link) => (
          <li class="mr-5" aria-expanded="true">
            <a class="underline" href={link.url}>
              {link.name}
            </a>
          </li>
        ))
      }
    </ul>
  </nav>
</header>

<script>
  let navMobileList = document.getElementById('nav-mobile-list')
  let navMobileListItems = navMobileList?.querySelectorAll('li')
  let navMobileButton = document.getElementById('nav-mobile-button')
  navMobileButton?.addEventListener('click', (_ev) => {
    navMobileList?.classList.toggle('invisible')
    let invisible = navMobileList?.classList.contains('invisible')
    navMobileListItems?.forEach((listItem) => {
      listItem.setAttribute('aria-expanded', invisible ? 'false' : 'true')
    })
  })
</script>
